# DIY 定制日志

本文档记录了本 Fork 仓库相对于官方上游仓库 (`blinkospace/blinko`) 所做的**个性化定制**，主要满足特定用户体验需求。

> [!NOTE]
> 这些修改是**非标准化**的，可能不适合所有用户。
> 如需同步上游更新，请注意这些文件的合并冲突。

---

## 1. 个性化交互 (UI/UX Tweaks)

此部分为满足特定用户体验而做的修改，从 `blinko-64-dmg` 的 `disable-interactions.patch` 移植而来。

| 功能 | 变更内容 | 原因 |
| :--- | :--- | :--- |
| **禁止滑动** | 移除了移动端的左右滑动交互 (`react-swipeable`) | 旧设备触控板易误触 |
| **禁止拖拽** | 禁用了看板的拖拽重排功能 (`dnd-kit`) | 避免误操作，保持布局静态 |
| **禁止图片管理** | 移除了图片直接删除按钮，改为二级页面操作 | 防止浏览时误删资源 |

---

## 2. Flomo 风格排版 (Style Overhaul)

为了追求极致的中文阅读体验，我们引入了一套类 Flomo 的排版规范 (`globals.css`)：

*   **排版几何**:
    *   **行高**: 锁定 `1.8` (原 1.5)，增加行间呼吸感。
    *   **字号**: 锁定 `15px` (原 14/16px)，移动端阅读的最佳平衡点。
*   **组件微调**:
    *   **标签 (Tag)**: 圆角由 7px 收缩为 4px，视觉更硬朗干练。

---

## 8. 配置与存储增强 (Storage & Config UX)

*   **S3 Custom Domain 支持**：在后端 `ZConfigSchema` 与前端设置页面中全面引入了 `s3CustomDomain` 字段支持，允许用户通过自定义 CDN 域名访问 R2/S3 资源。
*   **设置项自动保存 (Auto-save)**：
    *   **实现**：为存储设置页面中的输入框（如 Custom Domain）增加了 `onBlur` 触发逻辑。
    *   **体验**：当用户输入完成后失焦，系统会自动调用 API 同步至数据库，无需手动寻找“保存”按钮。

---

## 9. 资源管理系统升级 (Resources Overhaul)

针对 `/sources` 页面进行了交互逻辑的正向化重构，使资源引用关系更直观。

### 9.1 引用关系正向标记
*   **反转逻辑**: 移除“未关联警告”逻辑，改为“已关联标记”。
*   **视觉增强**: 仅当资源被笔记引用时，才在名称后显示蓝色的 **Link 图标** (`ph:link-bold`)，符合主流云盘（如 Google Drive）的认知习惯。

### 9.2 孤岛资源一键筛选
*   **新增按钮**: 在资源管理页顶部新增 **“选择未使用” (Select Unused)** 按钮。
*   **自动筛选**: 一键精准勾选所有尚未被任何笔记引用的文件（自动排除文件夹），配合底部操作栏可实现秒级空间清理。
