
/* !!! This is code generated by Prisma. Do not edit directly. !!!
/* eslint-disable */
// biome-ignore-all lint: generated file
"use strict"
const { makeTypedQueryFactory: $mkFactory } = require("../runtime/wasm-compiler-edge.js")
exports.searchAttachments = /*#__PURE__*/ $mkFactory("WITH combined_items AS (\nSELECT DISTINCT ON (folder_name)\nNULL as id,\nCASE\nWHEN path LIKE '/api/s3file/%' THEN '/api/s3file/'\nELSE '/api/file/'\nEND || split_part(\"perfixPath\", ',', 1) as path,\nsplit_part(\"perfixPath\", ',', 1) as name,\nNULL::decimal as size,\nNULL as type,\nfalse as \"isShare\",\n'' as \"sharePassword\",\nNULL::integer as \"noteId\",\n0::integer as \"sortOrder\",\nNULL::timestamp as \"createdAt\",\nNULL::timestamp as \"updatedAt\",\ntrue as is_folder,\nsplit_part(\"perfixPath\", ',', 1) as folder_name\nFROM attachments\nWHERE (\"accountId\" = $1)\nAND \"perfixPath\" != ''\nAND LOWER(\"perfixPath\") LIKE $2\n\nUNION ALL\n\nSELECT\nid,\npath,\nname,\nsize,\ntype,\n\"isShare\",\n\"sharePassword\",\n\"noteId\",\n\"sortOrder\",\n\"createdAt\",\n\"updatedAt\",\nfalse as is_folder,\nNULL as folder_name\nFROM attachments\nWHERE (\"accountId\" = $1)\nAND depth = 0\nAND LOWER(path) LIKE $2\n)\nSELECT *\nFROM combined_items\nORDER BY is_folder DESC, \"sortOrder\" ASC, \"updatedAt\" DESC NULLS LAST\nLIMIT $3\nOFFSET $4;")
