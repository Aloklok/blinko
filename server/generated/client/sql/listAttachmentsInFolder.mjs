
/* !!! This is code generated by Prisma. Do not edit directly. !!!
/* eslint-disable */
// biome-ignore-all lint: generated file
import { makeTypedQueryFactory as $mkFactory } from "../runtime/client"
export const listAttachmentsInFolder = /*#__PURE__*/ $mkFactory("WITH combined_items AS (\nSELECT DISTINCT ON (folder_name)\nNULL as id,\nCASE\nWHEN path LIKE '/api/s3file/%' THEN '/api/s3file/'\nELSE '/api/file/'\nEND || split_part(\"perfixPath\", ',', array_length(string_to_array($1, ','), 1) + 1) as path,\nsplit_part(\"perfixPath\", ',', array_length(string_to_array($1, ','), 1) + 1) as name,\nNULL::decimal as size,\nNULL as type,\nfalse as \"isShare\",\n'' as \"sharePassword\",\nNULL::integer as \"noteId\",\n0::integer as \"sortOrder\",\nNULL::timestamp as \"createdAt\",\nNULL::timestamp as \"updatedAt\",\ntrue as is_folder,\nsplit_part(\"perfixPath\", ',', array_length(string_to_array($1, ','), 1) + 1) as folder_name\nFROM attachments\nWHERE (\"accountId\" = $2)\nAND \"perfixPath\" LIKE $3\nAND array_length(string_to_array(\"perfixPath\", ','), 1) > array_length(string_to_array($1, ','), 1)\n\nUNION ALL\n\nSELECT\nid,\npath,\nname,\nsize,\ntype,\n\"isShare\",\n\"sharePassword\",\n\"noteId\",\n\"sortOrder\",\n\"createdAt\",\n\"updatedAt\",\nfalse as is_folder,\nNULL as folder_name\nFROM attachments\nWHERE (\"accountId\" = $2)\nAND \"perfixPath\" = $1\n)\nSELECT *\nFROM combined_items\nORDER BY is_folder DESC, \"sortOrder\" ASC, \"updatedAt\" DESC NULLS LAST\nLIMIT $4\nOFFSET $5;")
