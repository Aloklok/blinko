// This file is auto-generated by buildIcons.js
import * as React from 'react';
import { iconToSVG } from '@iconify/utils';
// Import Iconify Icon as fallback
import { Icon as IconifyIcon } from "@iconify/react";

const collectionCache: Record<string, any> = {};

const loaders: Record<string, () => Promise<any>> = {
  'eva': () => import('./collections/eva'),
  'solar': () => import('./collections/solar'),
  'mingcute': () => import('./collections/mingcute'),
  'ph': () => import('./collections/ph'),
  'ri': () => import('./collections/ri'),
  'skill-icons': () => import('./collections/skill-icons'),
  'logos': () => import('./collections/logos'),
  'vscode-icons': () => import('./collections/vscode-icons'),
  'cryptocurrency': () => import('./collections/cryptocurrency'),
  'tabler': () => import('./collections/tabler'),
  'mdi': () => import('./collections/mdi'),
  'material-symbols': () => import('./collections/material-symbols'),
  'hugeicons': () => import('./collections/hugeicons'),
  'system-uicons': () => import('./collections/system-uicons'),
  'fluent': () => import('./collections/fluent'),
  'line-md': () => import('./collections/line-md'),
  'humbleicons': () => import('./collections/humbleicons'),
  'proicons': () => import('./collections/proicons'),
  'ic': () => import('./collections/ic'),
  'eos-icons': () => import('./collections/eos-icons'),
  'bi': () => import('./collections/bi'),
  'simple-icons': () => import('./collections/simple-icons'),
  'famicons': () => import('./collections/famicons'),
  'iconamoon': () => import('./collections/iconamoon'),
  'lets-icons': () => import('./collections/lets-icons'),
  'akar-icons': () => import('./collections/akar-icons'),
  'prime': () => import('./collections/prime'),
  'basil': () => import('./collections/basil'),
  'mi': () => import('./collections/mi'),
  'lucide': () => import('./collections/lucide'),
  'majesticons': () => import('./collections/majesticons'),
  'carbon': () => import('./collections/carbon'),
  'uil': () => import('./collections/uil'),
  'ion': () => import('./collections/ion'),
  'uim': () => import('./collections/uim'),
  'si': () => import('./collections/si'),
  'mynaui': () => import('./collections/mynaui'),
  'icon-park-solid': () => import('./collections/icon-park-solid'),
  'gravity-ui': () => import('./collections/gravity-ui'),
  'gg': () => import('./collections/gg'),
  'icon-park-outline': () => import('./collections/icon-park-outline'),
  'ci': () => import('./collections/ci'),
  'radix-icons': () => import('./collections/radix-icons'),
  'mage': () => import('./collections/mage'),
  'iconoir': () => import('./collections/iconoir'),
  'cil': () => import('./collections/cil'),
  'fluent-color': () => import('./collections/fluent-color'),
};

// Icon component Props interface
interface IconProps {
  icon: string;
  width?: number | string;
  height?: number | string;
  color?: string;
  className?: string;
  style?: React.CSSProperties;
  onClick?: (e: React.MouseEvent<SVGSVGElement>) => void;
}

// Icon component
export const Icon = ({ 
  icon, 
  width = 24, 
  height = 24, 
  color, 
  className = '', 
  style = {},
  onClick 
}: IconProps) => {
  const [iconData, setIconData] = React.useState<any>(null);
  const [status, setStatus] = React.useState<'loading' | 'loaded' | 'error'>(icon ? 'loading' : 'error');

  React.useEffect(() => {
    if (!icon) return;
    
    const parts = icon.split(':');
    if (parts.length < 2) {
      setStatus('error');
      return;
    }
    
    const prefix = parts[0];
    const name = parts.slice(1).join(':');
    
    if (!loaders[prefix]) {
      setStatus('error');
      return;
    }

    const loadIcon = async () => {
      try {
        if (!collectionCache[prefix]) {
          const module = await loaders[prefix]();
          collectionCache[prefix] = module.default;
        }
        
        const collection = collectionCache[prefix];
        if (collection && collection.icons && collection.icons[name]) {
          const item = collection.icons[name];
          setIconData({
            body: item.body,
            width: item.width || collection.width || 16,
            height: item.height || collection.height || 16,
          });
          setStatus('loaded');
        } else {
          setStatus('error');
        }
      } catch (err) {
        console.error(`Failed to load icon ${icon}:`, err);
        setStatus('error');
      }
    };

    loadIcon();
  }, [icon]);

  if (!icon) return null;
  
  // Use Iconify fallback if not found locally or error
  if (status === 'error') {
    return <IconifyIcon 
      icon={icon}
      width={width}
      height={height}
      color={color}
      className={className}
      style={style}
      onClick={onClick}
    />;
  }
  
  if (status === 'loading' || !iconData) {
    return <div 
      style={{ 
        width: typeof width === 'number' ? `${width}px` : width, 
        height: typeof height === 'number' ? `${height}px` : height,
        display: 'inline-block',
        ...style 
      }} 
      className={className}
    />;
  }
  
  const renderData = iconToSVG(iconData, {
    width: typeof width === 'number' ? width.toString() : width || '24',
    height: typeof height === 'number' ? height.toString() : height || '24',
  });
  
  const svgAttributes = {
    width,
    height,
    viewBox: renderData.attributes.viewBox,
    className,
    style: {
      ...style,
      color: color
    },
    dangerouslySetInnerHTML: { __html: renderData.body },
    onClick,
  };
  
  return <svg {...svgAttributes} />;
};

export default Icon;
